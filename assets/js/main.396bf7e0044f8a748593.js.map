{"version":3,"file":"assets/js/main.396bf7e0044f8a748593.js","mappings":"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","sources":["webpack://cswd2-sprint-a2-zoo-vaj/./src/components/zoo-photo-booth.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/AnimalData.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/components/z-hover-highlight.js","webpack://cswd2-sprint-a2-zoo-vaj/webpack/bootstrap","webpack://cswd2-sprint-a2-zoo-vaj/webpack/runtime/define property getters","webpack://cswd2-sprint-a2-zoo-vaj/webpack/runtime/global","webpack://cswd2-sprint-a2-zoo-vaj/webpack/runtime/hasOwnProperty shorthand","webpack://cswd2-sprint-a2-zoo-vaj/webpack/runtime/publicPath","webpack://cswd2-sprint-a2-zoo-vaj/webpack/runtime/jsonp chunk loading","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/UiFeedback.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/formsubmission.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/Security.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/AnimalAPI.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/ZooOperations.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/zooLocations.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/components/zoo-animal-card.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/zoo.js","webpack://cswd2-sprint-a2-zoo-vaj/./src/js/AdminDashboard.js"],"sourcesContent":["// components/zoo-photo-booth.js\nclass ZooPhotoBooth extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this._stream = null;\n\n    const link = document.createElement(\"link\");\n    link.rel = \"stylesheet\";\n    link.href = new URL(\"../styles.css\", import.meta.url).href;\n    this.shadowRoot.append(link);\n\n    // Set up the audio snap\n    const defaultSrc = new URL(\"./snap.mp3\", import.meta.url).href;\n    this._audio = new Audio(this.getAttribute(\"sound-src\") || defaultSrc);\n    this._audio.preload = \"auto\";\n  }\n\nattributeChangedCallback(name, _old, val) {\n    if (name === \"sound-src\" && this._audio) this._audio.src = val || \"./snap.mp3\";\n  }\n\n  connectedCallback() {\n    this.shadowRoot.innerHTML = `\n      <div class=\"row\">\n        <video id=\"video\" playsinline></video>\n        <canvas id=\"canvas\" width=\"320\" height=\"240\"></canvas>\n        <img id=\"preview\" class=\"preview\" alt=\"Snapshot preview\" style=\"display:none\"/>\n      </div>\n\n      <div class=\"row controls\">\n        <button id=\"start\">Start Camera</button>\n        <button id=\"capture\" class=\"secondary\" disabled>Take Photo</button>\n        <button id=\"retake\" class=\"ghost\" disabled>Retake</button>\n        <button id=\"use\" class=\"secondary\" disabled>Use Photo</button>\n\n        <input id=\"file\" type=\"file\" accept=\"image/*\" capture=\"user\">\n        <label class=\"file-btn\" for=\"file\">Upload instead</label>\n      </div>\n\n      <div class=\"note\">All photos stay on this device unless you submit the form.</div>\n      <div id=\"err\" class=\"error\" role=\"alert\" style=\"display:none\"></div>\n    `;\n\n    this._els = {\n      video: this.shadowRoot.getElementById(\"video\"),\n      canvas: this.shadowRoot.getElementById(\"canvas\"),\n      preview: this.shadowRoot.getElementById(\"preview\"),\n      start: this.shadowRoot.getElementById(\"start\"),\n      capture: this.shadowRoot.getElementById(\"capture\"),\n      retake: this.shadowRoot.getElementById(\"retake\"),\n      use: this.shadowRoot.getElementById(\"use\"),\n      file: this.shadowRoot.getElementById(\"file\"),\n      err: this.shadowRoot.getElementById(\"err\"),\n    };\n\n    this._els.start.addEventListener(\"click\", () => this._startCamera());\n    this._els.capture.addEventListener(\"click\", () => this._capture());\n    this._els.retake.addEventListener(\"click\", () => this._retake());\n    this._els.use.addEventListener(\"click\", () => this._emitPhoto());\n    this._els.file.addEventListener(\"change\", (e) => this._fromFile(e));\n  }\n\n  disconnectedCallback() { this._stopCamera(); }\n\n  _toggleButtons({ start, capture, retake, use }) {\n    if (start   != null) this._els.start.disabled   = !start;\n    if (capture != null) this._els.capture.disabled = !capture;\n    if (retake  != null) this._els.retake.disabled  = !retake;\n    if (use     != null) this._els.use.disabled     = !use;\n  }\n\n  _showError(msg) { this._els.err.textContent = msg; this._els.err.style.display = \"block\"; }\n  _hideError() { this._els.err.style.display = \"none\"; }\n\n  async _startCamera() {\n    try {\n      this._hideError();\n      this._stopCamera();\n\n      if (!navigator.mediaDevices?.getUserMedia) {\n        this._showError(\"Camera API not available. Use the Upload button instead.\");\n        this._toggleButtons({ start: true, capture: false, retake: false, use: false });\n        return;\n      }\n\n      const constraints = { video: { facingMode: \"user\", width: 320, height: 240 }, audio: false };\n      this._stream = await navigator.mediaDevices.getUserMedia(constraints);\n      const v = this._els.video;\n      v.srcObject = this._stream;\n\n      await v.play().catch(()=>{});\n      if (!v.videoWidth || !v.videoHeight) {\n        await new Promise(res => v.addEventListener(\"loadedmetadata\", res, { once: true }));\n      }\n\n      // ready to capture\n      this._els.preview.style.display = \"none\";\n      v.style.display = \"block\";\n      this._els.canvas.style.display = \"none\";\n      this._toggleButtons({ start: false, capture: true, retake: false, use: false });\n    } catch (err) {\n      console.error(\"getUserMedia failed:\", err);\n      this._showError(\"Camera blocked or unavailable. You can upload a photo instead.\");\n      this._toggleButtons({ start: true, capture: false, retake: false, use: false });\n    }\n  }\n\n  _stopCamera() {\n    if (this._stream) {\n      this._stream.getTracks().forEach(t => t.stop());\n      this._stream = null;\n    }\n  }\n\n  _capture() {\n    const v = this._els.video;\n    if (!this._stream || !v || !v.videoWidth) {\n      this._showError(\"Camera not ready yet. Click Start, grant permission, then try again.\");\n      return;\n    }\n\n    // ðŸ”Š play shutter sound\n    if (this._audio) { this._audio.currentTime = 0; this._audio.play().catch(()=>{}); }\n\n    const c = this._els.canvas;\n    const ctx = c.getContext(\"2d\");\n    c.width = v.videoWidth || 320;\n    c.height = v.videoHeight || 240;\n    try { ctx.drawImage(v, 0, 0, c.width, c.height); }\n    catch (e) { console.error(\"drawImage failed:\", e); this._showError(\"Could not capture the frame.\"); return; }\n\n    this._els.preview.src = c.toDataURL(\"image/jpeg\", 0.92);\n    this._els.preview.style.display = \"block\";\n    v.style.display = \"none\";\n    c.style.display = \"none\";\n\n    this._toggleButtons({ start: false, capture: false, retake: true, use: true });\n  }\n\n  _retake() {\n    this._els.preview.style.display = \"none\";\n    if (this._stream) {\n      this._els.video.style.display = \"block\";\n      this._toggleButtons({ start: false, capture: true, retake: false, use: false });\n    } else {\n      this._toggleButtons({ start: true, capture: false, retake: false, use: false });\n    }\n  }\n\n  _emitPhoto() {\n    const dataUrl = this._els.preview.src;\n    if (!dataUrl) return;\n    // Emit to parent page\n    this.dispatchEvent(new CustomEvent(\"photo-taken\", {\n      bubbles: true,\n      composed: true,\n      detail: { dataUrl }\n    }));\n  }\n\n  _fromFile(e) {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    if (!file.type.startsWith(\"image/\")) {\n      this._showError(\"Please choose an image file.\");\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = () => {\n      this._els.preview.src = reader.result;\n      this._els.preview.style.display = \"block\";\n      this._els.video.style.display = \"none\";\n      this._toggleButtons({ start:false, capture:false, retake:true, use:true });\n    };\n    reader.readAsDataURL(file);\n  }\n}\ncustomElements.define(\"zoo-photo-booth\", ZooPhotoBooth);","// AnimalData.js\n// This module handles all operations related to animal data management,\n// including fetching data via AJAX and rendering it in the DOM.\nimport { displayError } from \"./UiFeedback.js\";\nimport { safelyUpdateElementText } from './ZooOperations.js';\n// AnimalData.js\nexport let animals = [];\n\n// Predefined counts (if needed for reference)\nexport const elephants = 4;\nexport const tigers = 2;\nexport const pandas = 3;\n\nexport const totalAnimals = elephants + tigers + pandas;\n\nconsole.log(\"Number of Elephants:\", elephants);\nconsole.log(\"Number of Tigers:\", tigers);\nconsole.log(\"Number of Pandas:\", pandas);\nconsole.log(\"Total number of animals in the zoo:\", totalAnimals);\n\n// Initialize animal data\nanimals.push({ id: 1, name: 'Ellie', species: 'Elephant', count: 3, gender: 'Female', status: 'Open', health: 'Healthy' });\nanimals.push({ id: 2, name: 'Tony', species: 'Tiger', count: 2, gender: 'Male', status: 'Closed', health: 'Sick' });\nanimals.push({ id: 3, name: 'Panda', species: 'Panda', count: 4, gender: 'Male', status: 'Open', health: 'Healthy' });\nanimals.push({ id: 4, name: 'Leo', species: 'Lion', count: 5, gender: 'Male', status: 'Open', health: 'Healthy' });\n\nconsole.log(\"Current Zoo Animals:\");\nconsole.table(animals);\n\n/**\n * Displays or hides a loading message in the animal container.\n * @param {boolean} isLoading - If true, shows \"Loading animal data...\", otherwise clears the container.\n */\nexport const showLoading = (isLoading) => {\n    const container = document.getElementById(\"animalContainer\");\n    if (container) {\n      container.textContent = isLoading ? \"Loading animal data...\" : \"\";\n    }\n  };\n  \n    /**\n     * Fetches animal data from an external API using the Fetch API.\n     * Includes loading states and proper error handling.\n     */\n    // async function fetchAnimalData() {\n        // Replace with your actual API endpoint URL\n       // const apiUrl = \"animals.json\";\n       // showLoading(true);\n      //  try {\n      //    const response = await fetch(apiUrl, {\n       //     method: \"GET\",\n       //     mode: \"cors\",         // This enables CORS for the request\n      //      credentials: \"include\" // Ensures cookies are sent if required\n      //    });\n       //   if (!response.ok) {\n      //      throw new Error(`Network error: ${response.status} ${response.statusText}`);\n    //      }\n      //    const data = await response.json();\n    //      showLoading(false);\n      //    animals = data;            // Save fetched data to your global array\n        //  saveAnimals();             // Optional, if you want it in localStorage\n        //  displayAnimals();          // âœ… This renders the toggle buttons + spans\n        //} catch (error) {\n         // showLoading(false);\n         // console.error(\"Error fetching animal data:\", error.message);\n          // Reuse your existing displayError function defined later in the file\n         // displayError(\"Failed to load animal data. Please try again later.\");\n       // }\n     // }\n\n     // fetchAnimalData();\n  \n  /**\n   * Renders the animal data in the DOM.\n   * It creates a card for each animal with its name, species, status, and health.\n   * @param {Array} data - An array of animal objects.\n   */\n  export const displayAnimalData = (data) => {\n    const container = document.getElementById(\"animalContainer\");\n    if (!container) {\n      console.error(\"Animal container element not found.\");\n      return;\n    }\n  \n    // Clear previous content safely\n    while (container.firstChild) {\n      container.removeChild(container.firstChild);\n    }\n  \n    data.forEach((animal) => {\n      const card = document.createElement(\"div\");\n      card.classList.add(\"animal-card\");\n  \n      // Title: Name and Species\n      const title = document.createElement(\"h3\");\n      title.textContent = `${animal.name} (${animal.species})`;\n      card.appendChild(title);\n  \n      // Status line\n      const status = document.createElement(\"p\");\n      status.textContent = `Status: ${animal.status}`;\n      card.appendChild(status);\n  \n      // Health line\n      const health = document.createElement(\"p\");\n      health.textContent = `Health: ${animal.health}`;\n      card.appendChild(health);\n      \n      // Animal image\n      const img = document.createElement(\"img\");\n      img.src = animal.image || \"images/default.png\";\n      img.onerror = () => {\n        img.src = \"images/default.png\";\n      };\n      img.alt = `${animal.name} the ${animal.species}`;\n      img.classList.add(\"animal-image\");\n      card.appendChild(img);\n\n  \n      // Status line with span ID\nconst statusLine = document.createElement(\"p\");\nstatusLine.textContent = \"Status: \";\nconst statusSpan = document.createElement(\"span\");\nstatusSpan.id = `status-${animal.id}`;\nstatusSpan.textContent = animal.status;\nstatusLine.appendChild(statusSpan);\ncard.appendChild(statusLine);\n\n// Health line with span ID\nconst healthLine = document.createElement(\"p\");\nhealthLine.textContent = \"Health: \";\nconst healthSpan = document.createElement(\"span\");\nhealthSpan.id = `health-${animal.id}`;\nhealthSpan.textContent = animal.health;\nhealthLine.appendChild(healthSpan);\ncard.appendChild(healthLine);\n  \n      // Append card to container\n      container.appendChild(card);\n    });\n  };\n  \n  export const validateAnimalData = (animal) => {\n    if (!animal || typeof animal !== \"object\") {\n      throw new Error(\"Invalid animal data: Expected an object.\");\n    }\n    if (!animal.id || typeof animal.id !== \"number\") {\n      throw new Error(\"Animal must have a valid numeric ID.\");\n    }\n    if (!animal.name || typeof animal.name !== \"string\") {\n      throw new Error(\"Animal must have a valid name (string).\");\n    }\n    if (!animal.species || typeof animal.species !== \"string\") {\n      throw new Error(\"Animal must have a valid species (string).\");\n    }\n    if (![\"Healthy\", \"Sick\"].includes(animal.health)) {\n      throw new Error(\"Invalid health status. Must be 'Healthy' or 'Sick'.\");\n    }\n    if (animals.some(a => a.id === animal.id)) {\n      throw new Error(`Duplicate ID found. Animal with ID ${animal.id} already exists.`);\n    }\n  \n    // âœ… Enhanced validation\n    if (!animal.location || typeof animal.location.lat !== \"number\" || typeof animal.location.lng !== \"number\") {\n      throw new Error(\"Animal must have valid location coordinates.\");\n    }\n    if (!Array.isArray(animal.feedingSchedule)) {\n      throw new Error(\"Feeding schedule must be an array of times.\");\n    }\n    if (!Array.isArray(animal.maintenanceRecords)) {\n      throw new Error(\"Maintenance records must be an array.\");\n    }\n  };\n  \n  \n  export const loadAnimals = () => {\n    let storedAnimals = localStorage.getItem(\"animals\");\n    animals = storedAnimals ? JSON.parse(storedAnimals) : [];\n    displayAnimals(); // Make sure displayAnimals() is also accessible/imported if needed.\n  };\n  \n  export const saveAnimals = () => {\n    localStorage.setItem(\"animals\", JSON.stringify(animals));\n  };\n  \n  export const addAnimal = (animal) => {\n    try {\n      validateAnimalData(animal);\n      animals.push(animal);\n      saveAnimals(); // Save to localStorage\n      displayAnimals();\n      console.log(`Animal added successfully: ${JSON.stringify(animal)}`);\n    } catch (error) {\n      console.error(\"Error adding animal:\", error.message);\n      displayError(error.message); // Ensure displayError is available in the module or imported.\n    }\n  };\n  \n  // And export your displayAnimals() function if it is part of the data operations:\n  function displayAnimals() {\n    try {\n      const container = document.getElementById('animalContainer');\n      if (!container) throw new Error('Animal container element not found.');\n  \n      // Efficiently clear previous elements\n      while (container.firstChild) {\n        container.removeChild(container.firstChild);\n      }\n  \n      animals.forEach(animal => {\n        const card = document.createElement('div');\n        card.classList.add('animal-card');\n  \n        // Safe text setting using textContent\n        const nameElement = document.createElement('h3');\n        nameElement.textContent = `${animal.name} (${animal.species})`;\n        card.appendChild(nameElement);\n  \n        const statusElement = document.createElement('p');\n        statusElement.textContent = \"Status: \";\n        const statusText = document.createElement('span');\n        statusText.id = `status-${animal.id}`;\n        statusText.textContent = animal.status;\n        statusElement.appendChild(statusText);\n        card.appendChild(statusElement);\n  \n        const healthElement = document.createElement('p');\n        healthElement.textContent = \"Health: \";\n        const healthText = document.createElement('span');\n        healthText.id = `health-${animal.id}`;\n        healthText.textContent = animal.health;\n        healthElement.appendChild(healthText);\n        card.appendChild(healthElement);\n        \n        // Animal image\n        const img = document.createElement(\"img\");\n        img.src = animal.image || \"images/default.png\";\n        img.onerror = () => {\n          img.src = \"images/default.png\";\n        };\n        img.alt = `${animal.name} the ${animal.species}`;\n        img.classList.add(\"animal-image\");\n        card.appendChild(img);\n  \n        // Buttons for toggling status and health\n        const toggleButton = document.createElement('button');\n        toggleButton.textContent = \"Toggle Status\";\n        toggleButton.onclick = () => window.toggleStatus(animal.id);\n        card.appendChild(toggleButton);\n  \n        const updateHealthButton = document.createElement('button');\n        updateHealthButton.textContent = \"Update Health\";\n        updateHealthButton.onclick = () => window.updateHealth(animal.id);\n        card.appendChild(updateHealthButton);\n  \n        container.appendChild(card);\n      });\n  \n      safelyUpdateElementText(\"visitorCounter\", `Visitors: ${localStorage.getItem(\"visitorCount\") || 0}`);\n    } catch (error) {\n      console.error('Error displaying animals:', error);\n      displayError(error.message); // Sprint B1 Zoo Part 2\n    }\n  };\n\n  /**\n * Populates the animal selection dropdown with options based on the provided animal list.\n * Each option shows the animal's name and species.\n *\n * @param {Array} animals - An array of animal objects to populate the dropdown with.\n * Assumes each object has a `name` and `species` property.\n * Clears existing options before adding new ones.\n */\n  export const populateAnimalDropdown = (animals) => {\n    try {\n      // Get the animal dropdown element from the DOM\n      const animalDropdown = document.getElementById(\"animal\");\n      if (!animalDropdown) {\n        throw new Error(\"Animal dropdown not found. Check your HTML.\");\n      }\n  \n      console.log(\"Populating animal dropdown...\");\n  \n      // Safely clear all existing options from the dropdown\n      while (animalDropdown.firstChild) {\n        animalDropdown.removeChild(animalDropdown.firstChild);\n      }\n  \n      // Create and append the default placeholder option\n      const defaultOption = document.createElement(\"option\");\n      defaultOption.value = \"\";\n      defaultOption.textContent = \"-- Select an Animal --\";\n      animalDropdown.appendChild(defaultOption);\n  \n      // If no animals are available, log a warning\n      if (animals.length === 0) {\n        console.warn(\"No animals found. Dropdown will be empty.\");\n      } else {\n        // For each animal, create an <option> element and add it to the dropdown\n        animals.forEach(animal => {\n          const option = document.createElement(\"option\");\n          option.value = animal.name;\n          option.textContent = `${animal.name} (${animal.species})`;\n          animalDropdown.appendChild(option);\n        });\n  \n        console.log(\"Dropdown populated successfully.\");\n      }\n    } catch (error) {\n      console.error(\"Error populating animal dropdown:\", error.message);\n    }\n  };\n  export { displayAnimals };\n\n  export function notifyAnimalStatusChange(animal) {\n  if (Notification.permission === \"granted\") {\n    new Notification(`Status Update: ${animal.name}`, {\n      body: `${animal.name} the ${animal.species} is now ${animal.status}`,\n      icon: \"icons/icon-192.png\"\n    });\n  }\n}","// @ts-nocheck\nclass ZHoverHighlight extends HTMLElement {\n  static get observedAttributes() { return [\"selector\"]; }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n    this._activeEl = null;\n\n    this.shadowRoot.innerHTML = `\n      <slot></slot>\n      <span part=\"hl\" class=\"hl\" aria-hidden=\"true\"></span>\n    `;\n\n    this.hl = this.shadowRoot.querySelector(\".hl\");\n\n    // bind handlers once\n    this._onEnter = e => this._setActive(e.currentTarget);\n    this._onFocus = e => this._setActive(e.currentTarget);\n    this._onLeave = () => this._clearActive();\n    this._reposition = () => this._activeEl && this._positionTo(this._activeEl);\n  }\n\n  get selector() { return this.getAttribute(\"selector\") || \"a\"; }\n\n  connectedCallback()  { this._bind(); }\n  disconnectedCallback(){ this._unbind(); }\n  attributeChangedCallback() { this._unbind(); this._bind(); }\n\n  _bind() {\n    this.links = this.querySelectorAll(this.selector);\n    this.links.forEach(el => {\n      el.addEventListener(\"mouseenter\", this._onEnter);\n      el.addEventListener(\"mouseleave\", this._onLeave);\n      el.addEventListener(\"focus\", this._onFocus);\n      el.addEventListener(\"blur\", this._onLeave);\n    });\n    window.addEventListener(\"scroll\", this._reposition, { passive:true });\n    window.addEventListener(\"resize\", this._reposition);\n  }\n\n  _unbind() {\n    if (this.links) {\n      this.links.forEach(el => {\n        el.removeEventListener(\"mouseenter\", this._onEnter);\n        el.removeEventListener(\"mouseleave\", this._onLeave);\n        el.removeEventListener(\"focus\", this._onFocus);\n        el.removeEventListener(\"blur\", this._onLeave);\n      });\n    }\n    window.removeEventListener(\"scroll\", this._reposition);\n    window.removeEventListener(\"resize\", this._reposition);\n  }\n\n  _setActive(el) {\n    this._activeEl = el;\n    this._positionTo(el);\n    this.hl.style.opacity = \"1\";\n  }\n  _clearActive() {\n    this._activeEl = null;\n    this.hl.style.opacity = \"0\";\n  }\n\n  _positionTo(el) {\n    const r = el.getBoundingClientRect();\n    const host = this.getBoundingClientRect();\n\n    // Convert document coords â†’ host coords\n    const left = (r.left + window.scrollX) - (host.left + window.scrollX);\n    const top  = (r.top  + window.scrollY) - (host.top  + window.scrollY);\n\n    this.hl.style.width  = `${r.width}px`;\n    this.hl.style.height = `${r.height}px`;\n    this.hl.style.transform = `translate(${left}px, ${top}px)`;\n  }\n}\ncustomElements.define(\"z-hover-highlight\", ZHoverHighlight);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","// UIFeedback.js\n\n/**\n * Displays an error message in the error container.\n * Prevents duplicate messages by clearing old entries.\n * @param {string} message - The error message to display.\n */\nexport function displayError(message) {\n    try {\n      const errorContainer = document.getElementById(\"errorContainer\");\n      if (!errorContainer) {\n        console.error(\"Error container not found in the DOM.\");\n        return;\n      }\n      // Remove old error messages safely\n      while (errorContainer.firstChild) {\n        errorContainer.removeChild(errorContainer.firstChild);\n      }\n      // Prevent duplicate error messages\n      const existingErrors = Array.from(errorContainer.children).map(el => el.textContent);\n      if (existingErrors.includes(`${message}`)) {\n        return; // Don't add duplicate messages\n      }\n      // Append new error message\n      const errorElement = document.createElement(\"p\");\n      errorElement.textContent = `${message}`;\n      errorContainer.appendChild(errorElement);\n    } catch (err) {\n      console.error(\"Error displaying error message:\", err.message);\n    }\n  }\n  \n  /**\n   * Displays a success message in the success container.\n   * Clears any old success messages before displaying the new one.\n   * @param {string} message - The success message to display.\n   */\n  export function displaySuccess(message) {\n    try {\n      const successContainer = document.getElementById(\"successContainer\");\n      if (!successContainer) {\n        console.error(\"Success container not found in the DOM.\");\n        return;\n      }\n      // Remove old success messages safely\n      while (successContainer.firstChild) {\n        successContainer.removeChild(successContainer.firstChild);\n      }\n      // Append new success message\n      const successElement = document.createElement(\"p\");\n      successElement.style.color = \"blue\";\n      successElement.textContent = `${message}`;\n      successContainer.appendChild(successElement);\n    } catch (err) {\n      console.error(\"Error displaying success message:\", err.message);\n    }\n  }\n  ","// formsubmission.js\n// This module handles form submissions for the NTC Zoo application.\n// It includes functions to sanitize user input, process the booking form,\n// process the membership form, and attach the relevant event listeners.\nimport { displayError, displaySuccess } from \"./UiFeedback.js\";\n\n// -------------------------------\n// PHONE VALIDATION HELPERS\n// -------------------------------\nexport const normalizePhone = (s) => s.replace(/[^\\d]/g, \"\");\n\nexport const isValidUSPhone = (raw) => {\n  const d = normalizePhone(raw);\n\n  // Must be 10 digits or 11 digits starting with 1\n  let core = d;\n  if (d.length === 11 && d.startsWith(\"1\")) {\n    core = d.slice(1);\n  } else if (d.length !== 10) {\n    return false;\n  }\n\n  // NANP rules:\n  const area = core.slice(0, 3);\n  const exchange = core.slice(3, 6);\n\n  // Area code cannot start with 0 or 1\n  if (/^[01]/.test(area)) return false;\n\n  // Exchange cannot start with 0 or 1\n  if (/^[01]/.test(exchange)) return false;\n\n  // Reject illegal or nonsense patterns\n  if (/^([0-9])\\1+$/.test(core)) return false;     // 0000000000, 1111111111\n  if (core === \"1234567890\" || core === \"1234567891\") return false;\n\n  return true;\n};\n\nexport const formatUSPhone = (raw) => {\n  const d = normalizePhone(raw);\n  const core = d.length === 11 ? d.slice(1) : d;\n  if (core.length !== 10) return raw;\n  return `(${core.slice(0, 3)}) ${core.slice(3, 6)}-${core.slice(6)}`;\n};\n\n// field-level inline feedback\nconst setFieldMsg = (input, text, ok = false) => {\n  const msg = input.closest(\".field\")?.querySelector(\".msg\");\n  if (msg) msg.textContent = text;\n  input.classList.toggle(\"is-valid\", ok);\n  input.classList.toggle(\"is-invalid\", !ok);\n};\n\n/**\n * Function to initialize the membership form (without handling submission)\n */\nexport const initializeMembershipForm = () => {\n    console.log(\"Initializing membership form...\");\n    const form = document.getElementById(\"membershipForm\");\n    if (!form) {\n      console.error(\"Membership form not found.\");\n      return;\n    }\n    // Reset the form fields on page load or apply any default values.\n    form.reset();\n  };\n\n//////////////////////////////\n// Input Sanitization\n//////////////////////////////\nexport const sanitizeInput = (input) => {\n    console.log(\"Before Sanitization:\", input);\n    \n    // Buffer Overflow Protection: Limit input length to 255 characters.\n    const maxLength = 255;\n    if (input.length > maxLength) {\n      console.warn(\"Input truncated due to length limit\");\n      input = input.slice(0, maxLength);\n    }\n    \n    // SQL Injection Detection using a regex pattern.\n    const sqlPattern = /\\b(SELECT|INSERT|DELETE|DROP|UPDATE|UNION|--|;|\\|)/gi;\n    if (sqlPattern.test(input)) {\n      console.warn(\"SQL Injection pattern detected in input:\", input);\n      // Reject the input by throwing an error to prevent submission.\n      throw new Error(\"Suspicious input detected. Please remove any SQL keywords.\");\n    }\n    \n    // Remove any HTML tags.\n    const tagStripped = input.replace(/<[^>]*>?/gm, \"\");\n    \n    // Encode common dangerous characters.\n    const encoded = tagStripped\n      .replace(/&/g, \"&amp;\")\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .replace(/\"/g, \"&quot;\")\n      .replace(/'/g, \"&#039;\");\n    \n    console.log(\"After Sanitization:\", encoded);\n    return encoded;\n  };\n  \n  //////////////////////////////\n  // Booking Form Submission\n  //////////////////////////////\n  export const setupBookingForm = () => {\n    const bookingForm = document.getElementById(\"bookingForm\");\n    if (!bookingForm) {\n      console.error(\"Booking form not found. Check your HTML.\");\n      return;\n    }\n    \n    bookingForm.addEventListener(\"submit\", (event) => {\n      event.preventDefault(); // Prevent default form submission\n      \n      try {\n        // Retrieve and sanitize input values.\n        const visitorName = sanitizeInput(document.getElementById(\"visitorName\").value.trim());\n        const contact = sanitizeInput(document.getElementById(\"contact\").value.trim());\n        // Validate the phone number input.\n        const contactInput = document.getElementById(\"contact\");\n        if (!isValidUSPhone(contact)) {\n          setFieldMsg(contactInput, \"Invalid phone number. Must be 10 digits.\");\n          alert(\"Please enter a valid phone number.\");\n          return;\n        } else {\n          setFieldMsg(contactInput, \"Phone looks good!\", true);\n          contactInput.value = formatUSPhone(contact);\n        }\n        const selectedAnimal = sanitizeInput(document.getElementById(\"animal\").value);\n        const dateTime = sanitizeInput(document.getElementById(\"dateTime\").value);\n        const groupSize = parseInt(document.getElementById(\"groupSize\").value, 10);\n        \n        // Validate inputs.\n        if (!visitorName || !contact || !selectedAnimal || !dateTime || isNaN(groupSize) || groupSize < 1) {\n          throw new Error(\"Please fill in all required fields with valid data.\");\n        }\n        \n        // Store booking data to localStorage.\n        const bookings = JSON.parse(localStorage.getItem(\"bookings\")) || [];\n        bookings.push({ visitorName, contact, selectedAnimal, dateTime, groupSize });\n        localStorage.setItem(\"bookings\", JSON.stringify(bookings));\n        \n        alert(\"Booking confirmed!\");\n        \n        // Update the visitor count, if a global updateVisitorCount() function exists.\n        if (window.updateVisitorCount) {\n          window.updateVisitorCount(groupSize);\n        }\n        \n        // Reset the booking form.\n        bookingForm.reset();\n        \n      } catch (error) {\n        console.error(\"Error processing booking:\", error.message);\n        alert(error.message);\n      }\n    });\n  };\n  \n  //////////////////////////////\n  // Membership Form Submission\n  //////////////////////////////\n  export const handleMembershipSubmission = (event) => {\n    event.preventDefault();\n    try {\n      // Get membership form fields.\n      const nameEl = document.getElementById(\"name\");\n      const emailEl = document.getElementById(\"email\");\n      const membershipTypeEl = document.getElementById(\"membershipType\");\n      const startDateEl = document.getElementById(\"startDate\");\n      const emergencyContactEl = document.getElementById(\"emergencyContact\");\n      \n      // Ensure all required fields exist.\n      if (!nameEl || !emailEl || !membershipTypeEl || !startDateEl || !emergencyContactEl) {\n        throw new Error(\"Some membership form fields were not found in the DOM.\");\n      }\n      \n      // Read and sanitize the input values.\n      const name = sanitizeInput(nameEl.value.trim());\n      const email = sanitizeInput(emailEl.value.trim());\n      const membershipType = sanitizeInput(membershipTypeEl.value);\n      const startDate = sanitizeInput(startDateEl.value);\n      const emergencyContact = sanitizeInput(emergencyContactEl.value.trim());\n      // Validate the emergency contact input.\n      const emergencyContactInput = document.getElementById(\"emergencyContact\");\n      if (!isValidUSPhone(emergencyContact)) {\n        setFieldMsg(emergencyContactInput, \"Please enter a valid phone number (US, 10 digits).\");\n        if (window.displayError) displayError(\"Invalid emergency contact phone.\");\n        return;\n      } else {\n        setFieldMsg(emergencyContactInput, `Phone looks good: ${formatUSPhone(emergencyContact)}`, true);\n      }\n      const photoDataUrl = (document.getElementById(\"memberPhotoDataUrl\")?.value || \"\").trim();\n      \n      // Validate input values.\n      if (!name || !email || !membershipType || !startDate || !emergencyContact) {\n        throw new Error(\"Please fill in all required fields.\");\n      }\n      \n      // Save membership data to localStorage.\n      const members = JSON.parse(localStorage.getItem(\"members\")) || [];\n      members.push({ name, email, membershipType, startDate, emergencyContact, photoDataUrl});\n      localStorage.setItem(\"members\", JSON.stringify(members));\n      \n      // Optionally use a global displaySuccess() function to show a success message.\n      if (window.displaySuccess) {\n        window.displaySuccess(\"Membership registration successful!\");\n      }\n      \n      console.log(\"Membership registered successfully.\");\n      \n      // Update visitor count using a global function if available.\n      if (window.updateVisitorCount) {\n        window.updateVisitorCount(1);\n      }\n      \n      // Reset the membership form.\n      event.target.reset();\n      const preview = document.getElementById(\"memberPhotoPreview\");\n      if (preview) { preview.src = \"\"; preview.style.display = \"none\"; }\n      const hidden = document.getElementById(\"memberPhotoDataUrl\");\n      if (hidden) hidden.value = \"\";\n      \n    } catch (error) {\n      console.error(\"Error processing membership registration:\", error.message);\n      // Optionally use a global displayError() function if defined.\n      if (window.displayError) {\n        window.displayError(error.message);\n      }\n    }\n  };\n  \n  export const setupMembershipForm = () => {\n    const membershipForm = document.getElementById(\"membershipForm\");\n    if (!membershipForm) {\n      console.error(\"Membership form not found.\");\n      return;\n    }\n    membershipForm.addEventListener(\"submit\", handleMembershipSubmission);\n  };  \n\n  // formsubmission.js\n// Regex-based validation and user feedback for Add Animal form\n\nexport const patterns = {\n  // 2â€“30 letters, spaces, apostrophes, and hyphens\n  name: /^[A-Za-z][A-Za-z' -]{1,29}$/,\n  // Allowed species (adjust if you add more)\n  species: /^(Elephant|Tiger|Panda|Lion)$/i,\n  // Open or Closed\n  status: /^(Open|Closed)$/i,\n  // Health states\n  health: /^(Healthy|Sick|Injured)$/i,\n  // image path like images/ellie.png/.jpg/.jpeg/.webp\n  image: /^images\\/[a-z0-9_-]+\\.(png|jpg|jpeg|webp)$/i,\n  // Latitude: -90..90 with optional decimals\n  lat: /^(\\+|-)?(?:90(?:\\.0+)?|[0-8]?\\d(?:\\.\\d+)?)$/,\n  // Longitude: -180..180 with optional decimals\n  lng: /^(\\+|-)?(?:180(?:\\.0+)?|1[0-7]\\d(?:\\.\\d+)?|[0-9]?\\d(?:\\.\\d+)?)$/,\n  // Validates US phone numbers (10 digits, optional +1, allows spaces/dots/dashes)\n  phone: /^(\\+?1[\\s.-]?)?\\(?[2-9]\\d{2}\\)?[\\s.-]?[2-9]\\d{2}[\\s.-]?\\d{4}$/\n};\n\nfunction setFeedback(input, ok, message = \"\") {\n  const msg = input.parentElement.querySelector(\".msg\");\n  input.classList.toggle(\"is-valid\", ok);\n  input.classList.toggle(\"is-invalid\", !ok);\n  if (msg) {\n    msg.textContent = message;\n    msg.classList.toggle(\"ok\", ok);\n    msg.classList.toggle(\"err\", !ok);\n  }\n}\n\nexport function validateField(id, pattern, friendlyName) {\n  const el = document.getElementById(id);\n  if (!el) return { ok: false, el: null, value: \"\" };\n  const value = el.value.trim();\n  const ok = pattern.test(value);\n  setFeedback(el, ok, ok ? `${friendlyName} looks good.` : `Please enter a valid ${friendlyName}.`);\n  return { ok, el, value };\n}\n\n/**\n * Hook the â€œAdd Animalâ€ form and call onAdded(newAnimal) when valid.\n * Shows inline field messages + top success/error messages.\n */\nexport function wireAddAnimalForm(onAdded) {\n  const form = document.getElementById(\"addAnimalForm\");\n  if (!form) {\n    console.warn(\"addAnimalForm not found\");\n    return;\n  }\n\n  const $ = id => form.querySelector(\"#\" + id);\n  const setMsg = (input, text, ok = false) => {\n    const small = input.closest(\".field\")?.querySelector(\".msg\");\n    if (small) {\n      small.textContent = text || \"\";\n      small.style.color = ok ? \"green\" : \"red\";\n    }\n  };\n\n  // Simple, readable patterns for this assignment\n  const reName    = /^[A-Za-z ]{3,}$/;\n  const reSpecies = /^[A-Za-z ]+$/;\n  const reStatus  = /^(Open|Closed)$/i;\n  const reHealth  = /^(Healthy|Sick|Injured)$/i;\n  const reImage   = /^images\\/.+\\.(png|jpe?g|gif|webp)$/i;\n\n  form.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    // grab inputs\n    const name    = $(\"animalName\");\n    const species = $(\"animalSpecies\");\n    const status  = $(\"animalStatus\");\n    const health  = $(\"animalHealth\");\n    const image   = $(\"animalImage\");\n    const lat     = $(\"animalLat\");\n    const lng     = $(\"animalLng\");\n\n    // reset messages\n    [name,species,status,health,image,lat,lng].forEach(i => setMsg(i, \"\"));\n\n    // validate\n    let ok = true;\n    if (!reName.test(name.value.trim())) {\n      ok = false; setMsg(name, \"Name must be 3+ letters/spaces.\");\n    }\n    if (!reSpecies.test(species.value.trim())) {\n      ok = false; setMsg(species, \"Species must be letters only.\");\n    }\n    if (!reStatus.test(status.value.trim())) {\n      ok = false; setMsg(status, 'Status must be \"Open\" or \"Closed\".');\n    }\n    if (!reHealth.test(health.value.trim())) {\n      ok = false; setMsg(health, 'Health must be Healthy, Sick, or Injured.');\n    }\n    if (!reImage.test(image.value.trim())) {\n      ok = false; setMsg(image, 'Image must look like \"images/ellie.png\".');\n    }\n    const latNum = Number(lat.value);\n    const lngNum = Number(lng.value);\n    if (!Number.isFinite(latNum) || Math.abs(latNum) > 90) {\n      ok = false; setMsg(lat, \"Latitude must be a number between -90 and 90.\");\n    }\n    if (!Number.isFinite(lngNum) || Math.abs(lngNum) > 180) {\n      ok = false; setMsg(lng, \"Longitude must be a number between -180 and 180.\");\n    }\n\n    if (!ok) {\n      displayError(\"Please fix the highlighted fields and try again.\");\n      return;\n    }\n\n    // build the new animal object (shape matches your existing cards)\n    const newAnimal = {\n      id: Date.now(),                    // simple unique id for demo\n      name:   name.value.trim(),\n      species: species.value.trim(),\n      status:  /open/i.test(status.value) ? \"Open\" : \"Closed\",\n      health:  health.value.trim(),\n      location: { lat: latNum, lng: lngNum },\n      feedingSchedule: [],\n      maintenanceRecords: [],\n      image: image.value.trim()\n    };\n\n      console.log(\"Submitting NEW ANIMAL â†’\", newAnimal);\n    \n    try {\n      // add to page immediately\n      if (typeof onAdded === \"function\") onAdded(newAnimal);\n\n      // (optional) clear the form\n      form.reset();\n      displaySuccess(`Added ${newAnimal.name} (${newAnimal.species}) to the zoo.`);\n    } catch (err) {\n      console.error(\"Unable to add animal:\", err);\n      displayError(\"Something went wrong while adding the animal.\");\n    }\n  });\n}","// Security.js\n// Module containing security-related functions such as protocol verification, CSRF protection, and rate limiting.\nimport { handleMembershipSubmission } from \"./formsubmission.js\";\n\n// --- Configuration ---\nexport const MAX_REQUESTS = 5;\nexport const TIME_WINDOW_MS = 60000; // 60 seconds\n\n/**\n * Verifies that the current page is loaded over HTTPS.\n * If not, logs a warning, displays an error, and attempts to redirect.\n * Certificate validation is left to the browser.\n */\n// Only enforce HTTPS in non-local environments.\nexport const verifySecureProtocol = () => {\n  const isLocalHost =\n    location.hostname === \"localhost\" ||\n    location.hostname === \"127.0.0.1\" ||\n    location.hostname === \"[::1]\" ||\n    // vite/webpack define env flags; if present, treat as dev\n    (typeof import.meta !== \"undefined\" && import.meta.env && import.meta.env.DEV);\n\n  if (isLocalHost) {\n    console.log(\"Skipping HTTPS enforcement on localhost/dev.\");\n    return true;\n  }\n\n  if (location.protocol !== \"https:\") {\n    console.warn(\"Security Warning: Insecure protocol detected. Redirecting to HTTPSâ€¦\");\n    const errorContainer = document.getElementById(\"errorContainer\");\n    if (errorContainer) {\n      errorContainer.textContent =\n        \"This site requires a secure HTTPS connection. Redirecting to secure version...\";\n    }\n    const secureUrl = location.href.replace(/^http:/i, \"https:\");\n    location.replace(secureUrl);\n    return false;\n  }\n\n  console.log(\"HTTPS protocol verified. Secure connection is active.\");\n  return true;\n};\n\n  \n  /**\n   * Generates a new CSRF token using the crypto API.\n   */\n  export const generateCSRFToken = () => crypto.randomUUID();\n  \n  /**\n   * Sets a new CSRF token in sessionStorage and in the hidden CSRF field (if it exists).\n   */\n  export const setNewCSRFToken = () => {\n    const token = generateCSRFToken();\n    sessionStorage.setItem(\"csrfToken\", token);\n    const hiddenTokenInput = document.getElementById(\"csrfToken\");\n    if (hiddenTokenInput) {\n      hiddenTokenInput.value = token;\n    }\n  };\n  \n  /**\n   * Validates the submitted CSRF token against the token stored in sessionStorage.\n   * @param {string} submittedToken \n   * @returns {boolean}\n   */\n  export const validateCSRFToken = (submittedToken) => {\n    const stored = sessionStorage.getItem(\"csrfToken\");\n    return submittedToken === stored;\n  };\n  \n  /**\n   * Retrieves submission timestamps from sessionStorage.\n   * @returns {Array<number>}\n   */\n  export const getSubmissionTimes = () =>\n    JSON.parse(sessionStorage.getItem(\"submissionTimes\") || \"[]\");\n  \n  /**\n   * Adds the current timestamp to the submission times,\n   * keeping only those within the designated time window.\n   * @returns {Array<number>}\n   */\n  export const addSubmissionTime = () => {\n    const now = Date.now();\n    const TIME_WINDOW_MS = 60000; // 60 seconds\n    const times = getSubmissionTimes().filter(t => now - t < TIME_WINDOW_MS);\n    times.push(now);\n    sessionStorage.setItem(\"submissionTimes\", JSON.stringify(times));\n    return times;\n  };\n  \n  /**\n   * Checks whether the submission rate has exceeded the maximum allowed requests.\n   * @returns {boolean}\n   */\n  export const isRateLimited = () => {\n    const TIME_WINDOW_MS = 60000;\n    const MAX_REQUESTS = 5;\n    return getSubmissionTimes().filter(t => Date.now() - t < TIME_WINDOW_MS).length >= MAX_REQUESTS;\n  };\n  \n  /**\n   * Inserts a hidden CSRF token input field into the specified forms.\n   */\n  export const addCSRFInputToForms = () => {\n    const forms = [\"membershipForm\", \"bookingForm\"];\n    forms.forEach(id => {\n      const form = document.getElementById(id);\n      if (form && !form.querySelector(\"#csrfToken\")) {\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.id = \"csrfToken\";\n        input.name = \"csrfToken\";\n        form.appendChild(input);\n      }\n    });\n  };\n  \n  /**\n   * Sets up the membership form with CSRF and rate limiting checks.\n   */\n  export const secureMembershipForm = () => {\n    const form = document.getElementById(\"membershipForm\");\n    if (!form) return;\n    form.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      const results = [];\n      const submittedToken = document.getElementById(\"csrfToken\").value;\n      \n      if (!validateCSRFToken(submittedToken)) {\n        console.error(\"Invalid or missing CSRF token.\");\n        results.push({ Test: \"CSRF Token\", Input: submittedToken, Expected: \"Valid\", Actual: \"Invalid\", Status: \"FAIL\" });\n        console.table(results);\n        return;\n      }\n      \n      if (isRateLimited()) {\n        console.error(\"Too many requests. Please wait.\");\n        results.push({ Test: \"Rate Limiting\", Input: getSubmissionTimes(), Expected: \"<5\", Actual: \">=5\", Status: \"FAIL\" });\n        console.table(results);\n        return;\n      }\n      \n      addSubmissionTime();\n      results.push({ Test: \"Valid Submission\", Input: submittedToken, Expected: \"Success\", Actual: \"Success\", Status: \"PASS\" });\n      console.table(results);\n      \n      handleMembershipSubmission(e);\n      // Then, refresh the CSRF token\n      setNewCSRFToken();\n    });\n  };\n  // Initialize all security features\nexport const initSecurity = () => {\n    addCSRFInputToForms();\n    setNewCSRFToken();\n    secureMembershipForm();\n}","const API_BASE = window.location.origin;\n\nfunction sleep(ms){ return new Promise(r => setTimeout(r, ms)); }\n\nasync function fetchWithRetry(path, {\n  retries = 5,\n  backoff = 800,        // initial backoff in ms\n  timeout = 12000,      // per-request timeout\n  init = {}\n} = {}) {\n  for (let attempt = 0; attempt <= retries; attempt++) {\n    const controller = new AbortController();\n    const timer = setTimeout(() => controller.abort(), timeout);\n\n    try {\n      const res = await fetch(`${API_BASE}${path}`, {\n        cache: \"no-store\",\n        signal: controller.signal,\n        ...init\n      });\n      clearTimeout(timer);\n\n      // Retry on transient server states\n      if ([502, 503, 504].includes(res.status)) throw new Error(`Transient ${res.status}`);\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      return res; // success\n    } catch (err) {\n      clearTimeout(timer);\n      if (attempt === retries) throw err;           // out of retries\n      await sleep(backoff * Math.pow(2, attempt));  // exponential backoff\n    }\n  }\n}\n\n// Call this once on startup to wake the server\nexport async function ensureApiAwake() {\n  const res = await fetch('/ping');\n  if (!res.ok) throw new Error(`HTTP ${res.status}`);\n  return res.json();\n}\n\nexport async function fetchAnimals() {\n  const res = await fetchWithRetry(\"/api/animals\", { retries: 4, backoff: 700 });\n  return res.json();\n}\n","// ZooOperations.js\n// This module handles core zoo interactive operations, such as toggling statuses,\n// updating visitor counts, displaying statistics as well as form submissions..\n\n/**\n * Safely updates text content for a given element by ID.\n * @param {string} id - The element ID.\n * @param {string} text - The new text content.\n */\nexport const safelyUpdateElementText = (id, text) => {\n    try {\n      const element = document.getElementById(id);\n      if (!element) throw new Error(`Element with ID \"${id}\" not found.`);\n      element.textContent = text;\n    } catch (error) {\n      console.warn(error.message);\n    }\n  };\n  \n  /**\n   * Toggles the status of an individual animal.\n   * @param {number} id - The animal's unique identifier.\n   * @param {Array} animals - The current animal list.\n   * @returns {Array} The updated animal list.\n   */\n  export const toggleAnimalStatus = (id, animals) => {\n    try {\n      const animal = animals.find(a => a.id === id);\n      if (!animal) throw new Error(`Animal with ID ${id} not found.`);\n      animal.status = (animal.status === 'Open') ? 'Closed' : 'Open';\n      safelyUpdateElementText(`status-${id}`, animal.status);\n      console.log(`Animal ID ${id} status toggled to: ${animal.status}`);\n      return animals;\n    } catch (error) {\n      console.error(\"Error toggling animal status:\", error.message);\n      return animals; // Optionally you could rethrow or handle further.\n    }\n  };\n  \n  /**\n   * Toggles the health status of an individual animal.\n   * @param {number} id - The animal's unique identifier.\n   * @param {Array} animals - The current animal list.\n   * @returns {Array} The updated animal list.\n   */\n  export const toggleAnimalHealth = (id, animals) => {\n    try {\n      const animal = animals.find(a => a.id === id);\n      if (!animal) throw new Error(`Animal with ID ${id} not found.`);\n      animal.health = (animal.health === 'Healthy') ? 'Sick' : 'Healthy';\n      safelyUpdateElementText(`health-${id}`, animal.health);\n      console.log(`Animal ID ${id} health toggled to: ${animal.health}`);\n      return animals;\n    } catch (error) {\n      console.error(\"Error updating animal health:\", error.message);\n      return animals;\n    }\n  };\n  \n  /**\n   * Toggles overall zoo status and updates all animal statuses accordingly.\n   * @param {string} currentZooStatus - The current zoo status (\"Open\" or \"Closed\").\n   * @param {Array} animals - The list of animals.\n   * @returns {Object} An object containing the updated zooStatus and animal list.\n   */\n  export const toggleZooStatus = (currentZooStatus, animals) => {\n    try {\n    const newStatus = (currentZooStatus === \"Open\") ? \"Closed\" : \"Open\";\n\n    // Flip header\n    const statusElement = document.getElementById(\"zooStatus\");\n    if (statusElement) statusElement.textContent = `Zoo Status: ${newStatus}`;\n\n    // Flip data\n    animals.forEach(a => { a.status = newStatus; });\n\n    // âœ… Update legacy DOM cards (those created by displayAnimals)\n    animals.forEach(({ id }) => {\n      const span = document.getElementById(`status-${id}`);\n      if (span) span.textContent = newStatus;\n    });\n\n    // âœ… Update web component cards in place (if theyâ€™re present)\n    document.querySelectorAll(\"zoo-animal-card\").forEach(card => {\n      const id = card.data?.id;\n      if (id == null) return;\n      const lbl = card.shadowRoot?.getElementById(`status-${id}`);\n      if (lbl) lbl.textContent = newStatus;\n      const latest = animals.find(x => String(x.id) === String(id));\n      if (latest) card.data = latest; // keep cardâ€™s data in sync\n    });\n\n    console.log(`Zoo status changed to: ${newStatus}`);\n    return { zooStatus: newStatus, animals };\n  } catch (error) {\n    console.error(\"Error toggling zoo status:\", error.message);\n    return { zooStatus: currentZooStatus, animals };\n  }\n  };\n  \n  /**\n   * Updates the visitor count and updates the UI.\n   * @param {number} change - Change in visitor count (positive or negative).\n   */\n  export const updateVisitorCount = (change) => {\n    try {\n      let visitorCount = parseInt(localStorage.getItem(\"visitorCount\")) || 0;\n      visitorCount += change;\n      if (visitorCount < 0) visitorCount = 0;\n      localStorage.setItem(\"visitorCount\", visitorCount);\n      safelyUpdateElementText(\"visitorCounter\", `Visitors: ${visitorCount}`);\n      console.log(`Visitor count updated: ${visitorCount}`);\n    } catch (error) {\n      console.error(\"Error updating visitor count:\", error.message);\n      throw error;\n    }\n  };\n  \n  /**\n   * Displays zoo statistics (total animals, open animals, closed animals, and visitor count).\n   * @param {Array} animals - The list of animals.\n   */\n  export const displayZooStatistics = (animals) => {\n    try {\n      const totalAnimals = animals.length;\n      const openAnimals = animals.filter(animal => animal.status === \"Open\").length;\n      const closedAnimals = animals.filter(animal => animal.status === \"Closed\").length;\n      const visitorCount = localStorage.getItem(\"visitorCount\") || 0;\n      console.log(\"Zoo Statistics:\");\n      console.table([\n        { \"Total Animals\": totalAnimals },\n        { \"Open Animals\": openAnimals },\n        { \"Closed Animals\": closedAnimals },\n        { \"Visitor Count\": visitorCount }\n      ]);\n      alert(`Zoo Statistics:\\nTotal: ${totalAnimals}\\nOpen: ${openAnimals}\\nClosed: ${closedAnimals}\\nVisitors: ${visitorCount}`);\n    } catch (error) {\n      console.error(\"Error displaying zoo statistics:\", error.message);\n    }\n  };\n  \n  /**\n   * (Optional) Populates the animal dropdown in the booking form.\n   * @param {Array} animals - The list of animals.\n   */\n  export const populateAnimalDropdown = (animals) => {\n    try {\n      const animalDropdown = document.getElementById(\"animal\");\n      if (!animalDropdown) throw new Error(\"Animal dropdown not found. Check your HTML.\");\n      \n      console.log(\"Populating animal dropdown...\");\n  \n      // Clear existing options safely\n      while (animalDropdown.firstChild) {\n        animalDropdown.removeChild(animalDropdown.firstChild);\n      }\n  \n      // Add default option\n      const defaultOption = document.createElement(\"option\");\n      defaultOption.value = \"\";\n      defaultOption.textContent = \"-- Select an Animal --\";\n      animalDropdown.appendChild(defaultOption);\n  \n      // Add animals\n      animals.forEach(animal => {\n        const option = document.createElement(\"option\");\n        option.value = animal.name;\n        option.textContent = `${animal.name} (${animal.species})`;\n        animalDropdown.appendChild(option);\n      });\n  \n      console.log(\"Dropdown populated successfully.\");\n    } catch (error) {\n      console.error(\"Error populating animal dropdown:\", error.message);\n    }\n  };\n  ","export const exhibits = [\n    { name: \"Elephant Habitat\", lat: 44.976, lng: -93.265 },\n    { name: \"Tiger Den\", lat: 44.977, lng: -93.262 }\n  ];\n  \n  export const kiosks = [\n    { id: 1, name: \"Info Kiosk A\", lat: 44.978, lng: -93.264 }\n  ];\n  \n  export const emergencyStations = [\n    { id: \"E1\", name: \"First Aid\", lat: 44.975, lng: -93.261 }\n  ];\n  \n  export const maintenanceSpots = [\n    { id: \"M1\", name: \"Tool Shed\", lat: 44.974, lng: -93.266 }\n  ];\n  ","// components/zoo-animal-card.js\nimport { toggleAnimalStatus, toggleAnimalHealth } from \"../js/ZooOperations.js\";\n\nclass ZooAnimalCard extends HTMLElement {\n  // If you want to pass data via an attribute:\n  static get observedAttributes() { return [\"animal\"]; }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" }); // Shadow DOM = isolated styles/markup\n  }\n\n  // Convenience getter/setter for the \"animal\" data\n  get data() {\n    const raw = this.getAttribute(\"animal\");\n    return raw ? JSON.parse(raw) : null;\n  }\n  set data(obj) {\n    this.setAttribute(\"animal\", JSON.stringify(obj));\n  }\n\n  connectedCallback() {\n    this.render();\n  }\n  attributeChangedCallback() {\n    this.render();\n  }\n  disconnectedCallback() {\n  }\n\n  _getLatestAnimal() {\n    const a = this.data;\n    if (!a) return null;\n    const list = Array.isArray(window.animals) ? window.animals : [];\n    return list.find(x => String(x.id) === String(a.id)) || a;\n  }\n\nrender() {\n    const a = this._getLatestAnimal();\n    if (!a) {\n      this.shadowRoot.innerHTML = `<em>No animal provided</em>`;\n      return;\n    }\n\n    const raw = a.image || \"images/default.png\";      // key must match your data\n    const imgSrc = raw.startsWith(\"/\") ? raw : `/${raw}`;\n\n    this.shadowRoot.innerHTML = `\n        <style>\n        :host{display:block}\n        .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:12px;margin:8px 0}\n        h3{margin:.25rem 0 8px;font:600 16px/1.3 system-ui}\n        img{display:block;width:220px;height:auto;border-radius:10px;margin:8px 0}\n        .row{margin:.25rem 0}\n        button{margin-right:8px;border:0;padding:.5rem .8rem;border-radius:8px;cursor:pointer;background:#10b981;color:#fff}\n        button.secondary{background:#3b82f6}\n      </style>\n\n      <article class=\"card\">\n        <h3>${a.name} <small>(${a.species})</small></h3>\n        <img src=\"${imgSrc}\" alt=\"${a.name}\" onerror=\"this.src='/images/default.png'\">\n\n        <div class=\"row\">Status: <b id=\"status-${a.id}\">${a.status}</b></div>\n        <div class=\"row\">Health: <b id=\"health-${a.id}\">${a.health}</b></div>\n\n        <div class=\"row\">\n          <button id=\"toggleStatus\">Toggle Status</button>\n          <button id=\"toggleHealth\" class=\"secondary\">Toggle Health</button>\n        </div>\n      </article>\n    `;\n\n    const statusBtn = this.shadowRoot.getElementById(\"toggleStatus\");\n    const healthBtn = this.shadowRoot.getElementById(\"toggleHealth\");\n\n    statusBtn.onclick = () => {\n      toggleAnimalStatus(a.id, window.animals || []);\n      const latest = this._getLatestAnimal();\n      const statusEl = this.shadowRoot.getElementById(`status-${a.id}`);\n      if (statusEl && latest) statusEl.textContent = latest.status;\n      this.data = latest || a;\n      this.dispatchEvent(new CustomEvent(\"animal-updated\", {\n        bubbles: true, detail: { id: a.id, status: latest?.status }\n      }));\n    };\n\n    healthBtn.onclick = () => {\n      toggleAnimalHealth(a.id, window.animals || []);\n      const latest = this._getLatestAnimal();\n      const healthEl = this.shadowRoot.getElementById(`health-${a.id}`);\n      if (healthEl && latest) healthEl.textContent = latest.health;\n      this.data = latest || a;\n      this.dispatchEvent(new CustomEvent(\"animal-updated\", {\n        bubbles: true, detail: { id: a.id, health: latest?.health }\n      }));\n    };\n\n    const link = this.shadowRoot.querySelector(\".wrapper a\");\n\n    if (link) {\n      const onEnter = () => { this._active = true; this._reposition(); };\n      const onLeave = () => {\n        this._active = false;\n        const hl = this.shadowRoot.querySelector(\".highlight\");\n        if (hl) hl.style.opacity = \"0\";\n      };\n      link.addEventListener(\"mouseenter\", onEnter);\n      link.addEventListener(\"focus\", onEnter);\n      link.addEventListener(\"mouseleave\", onLeave);\n      link.addEventListener(\"blur\", onLeave);\n      window.addEventListener(\"scroll\", this._reposition, { passive:true });\n      window.addEventListener(\"resize\", this._reposition);\n    }\n  }\n}\n\ncustomElements.define(\"zoo-animal-card\", ZooAnimalCard);","// zoo.js - Central initialization for Zoo Management System\nimport { initSecurity, verifySecureProtocol } from './Security.js';\nimport { initializeMembershipForm, setupBookingForm} from './formsubmission.js';\nimport { populateAnimalDropdown } from './AnimalData.js';\nimport { ensureApiAwake, fetchAnimals } from \"./AnimalAPI.js\";\nimport { toggleZooStatus, updateVisitorCount, displayZooStatistics, toggleAnimalHealth, toggleAnimalStatus } from './ZooOperations.js';\nimport { updateAdminDashboard } from './AdminDashboard.js';\nimport { displayError, displaySuccess } from './UiFeedback.js';\nimport { exhibits, emergencyStations } from './zooLocations.js';\nimport \"../components/zoo-animal-card.js\";\nimport \"../components/z-hover-highlight.js\";\nimport \"../components/zoo-photo-booth.js\";\nimport { wireAddAnimalForm } from \"./formsubmission.js\";\n\nexport function addAnimalToListAndRender(animal) {\n  window.animals.push(animal);\n  renderAnimalCards();\n  populateAnimalDropdown(window.animals);\n  window.displaySuccess?.(`Added ${animal.name} (${animal.species}).`);\n}\n\nconst renderAnimalCards = () => {\n  const container = document.getElementById(\"animalContainer\");\n  container.innerHTML = \"\";\n  window.animals.forEach(a => {\n    const el = document.createElement(\"zoo-animal-card\");\n    el.data = a;\n    container.appendChild(el);\n  });\n};\n\nfunction syncCardsWithAnimals() {\n  document.querySelectorAll(\"zoo-animal-card\").forEach(card => {\n    const id = card.data?.id;\n    const latest = window.animals.find(a => String(a.id) === String(id));\n    if (!latest) return;\n    // update the label inside the cardâ€™s shadow DOM\n    const lbl = card.shadowRoot?.getElementById(`status-${id}`);\n    if (lbl) lbl.textContent = latest.status;\n    // keep the cardâ€™s data in sync for future clicks\n    card.data = latest;\n  });\n}\n\nfunction wireMemberCamera() {\n  const booth = document.getElementById(\"memberCamera\");\n  const hidden = document.getElementById(\"memberPhotoDataUrl\");\n  const preview = document.getElementById(\"memberPhotoPreview\");\n\n  if (!booth || !hidden) return;\n\n  booth.addEventListener(\"photo-taken\", (e) => {\n    const { dataUrl } = e.detail || {};\n    hidden.value = dataUrl || \"\";\n    if (preview) {\n      preview.src = dataUrl || \"\";\n      preview.style.display = dataUrl ? \"block\" : \"none\";\n    }\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  console.log('âœ… Zoo Management System Loaded');\n\n     const statusEl = document.getElementById(\"zooStatus\");\n  if (statusEl) statusEl.textContent = \"Zoo Status: Warming upâ€¦\";\n\n  try {\n    (() => {\n  // make the pill once\n  const pill = document.createElement('span');\n  pill.className = 'hover-pill';\n  document.body.appendChild(pill);\n\n  let activeEl = null;\n\n  const positionTo = (el) => {\n    const r = el.getBoundingClientRect();\n    const pad = 4; \n    pill.style.width  = `${r.width}px`;\n    pill.style.height = `${r.height}px`;\n    pill.style.transform = `translate(${r.left + window.scrollX}px, ${r.top + window.scrollY - pad}px)`;\n    pill.style.opacity = '1';\n  };\n\n  const onEnter = (e) => { activeEl = e.currentTarget; positionTo(activeEl); };\n  const onLeave = () => { activeEl = null; pill.style.opacity = '0'; };\n  const onReposition = () => { if (activeEl) positionTo(activeEl); };\n\n  const statusEl   = document.getElementById('zooStatus');\n  const visitorsEl = document.getElementById('visitorCounter');\n\n  // make them keyboard-focusable for accessibility\n  [statusEl, visitorsEl].forEach(el => {\n    if (!el) return;\n    if (!el.hasAttribute('tabindex')) el.setAttribute('tabindex', '0');\n    el.addEventListener('mouseenter', onEnter);\n    el.addEventListener('mouseleave', onLeave);\n    el.addEventListener('focus', onEnter);\n    el.addEventListener('blur', onLeave);\n  });\n\n  window.addEventListener('scroll', onReposition, { passive: true });\n  window.addEventListener('resize', onReposition);\n  })();\n\n    await ensureApiAwake();               // ðŸ”¥ wake Render instance\n    const data = await fetchAnimals();    // then fetch real data\n    window.animals = data;\n    populateAnimalDropdown(data);\n    renderAnimalCards();\n\n    const matrix = animalsToMatrix(window.animals);\n    renderAnimalTable(matrix);\n\n    if (statusEl) statusEl.textContent = \"Zoo Status: Open\";\n\n    // Security verification\n    if (!verifySecureProtocol()) return;\n\n    // Initialize CSRF tokens and security for forms\n    initSecurity();\n\n\n    // Setup form event listeners\n    initializeMembershipForm();\n\n    wireAddAnimalForm((newAnimal) => {\n  window.animals.push(newAnimal);\n  renderAnimalCards();\n  populateAnimalDropdown(window.animals);\n  displaySuccess(`âœ… ${newAnimal.name} added successfully!`);\n  });\n    setupBookingForm();\n\n    // Admin dashboard real-time updates\n    updateAdminDashboard();\n\n    // Attach global functions for buttons\n  window.toggleZooStatus = () => {\n  const el = document.getElementById(\"zooStatus\");\n  const currentlyOpen = el.textContent.includes(\"Open\");\n  const next = currentlyOpen ? \"Closed\" : \"Open\";\n\n  // Call your existing operation (if it returns a result, use it)\n  const res = toggleZooStatus(currentlyOpen ? \"Open\" : \"Closed\", window.animals);\n\n  if (res && res.animals) {\n    // function returns { zooStatus, animals }\n    window.animals = res.animals;\n    el.textContent = `Zoo Status: ${res.zooStatus}`;\n  } else {\n    // function mutates in place â€” force animals to the new status\n    window.animals.forEach(a => { a.status = next; });\n    el.textContent = `Zoo Status: ${next}`;\n  }\n\n  // Update existing cards without rebuilding the container\n  syncCardsWithAnimals();\n};\n\n\n\n    window.updateHealth = (id) => {\n      toggleAnimalHealth(id, window.animals);\n    };    \n\n    window.displayZooStatistics = () => {\n      displayZooStatistics(window.animals);\n    };\n\n    window.updateVisitorCount = (count) => {\n      updateVisitorCount(count);\n    };\n\n    window.toggleStatus = (id) => {\n  toggleAnimalStatus(id, window.animals);\n  const updatedAnimal = window.animals.find(a => a.id === id);\n  if (updatedAnimal) {\n    import('./AnimalData.js').then(({ notifyAnimalStatusChange }) => {\n      notifyAnimalStatusChange(updatedAnimal);\n    });\n  }\n};\n\n    // Error and success messaging\n    window.displayError = displayError;\n    window.displaySuccess = displaySuccess;\n\n    console.group(\"ðŸ“ Geolocation Data\");\n    console.table(exhibits);\n    console.table(emergencyStations);\n    console.groupEnd();\n\n    //if ('serviceWorker' in navigator) {\n      //navigator.serviceWorker.register('/serviceworker.js')\n      //.then(() => console.log(\"Service Worker registered\"))\n      //.catch((err) => console.error(\"SW registration failed\", err));\n   // }\n\n// Only register SW in production (not on localhost)\nif ('serviceWorker' in navigator && !/^(localhost|127\\.0\\.0\\.1)/.test(location.hostname)) {\n  navigator.serviceWorker.register('/serviceworker.js')\n    .then(() => console.log(\"Service Worker registered\"))\n    .catch((err) => console.error(\"SW registration failed\", err));\n}\n\nfunction animalsToMatrix(animalList) {\n  return animalList.map(a => [\n    a.name ?? \"\",\n    a.species ?? \"\",\n    a.status ?? \"\",\n    a.health ?? \"\"\n  ]);\n}\n\n\nfunction renderAnimalTable(matrix) {\n    const tbody = document.querySelector(\"#animalTable tbody\");\n    tbody.innerHTML = \"\";\n\n    matrix.forEach(row => {\n        const tr = document.createElement(\"tr\");\n        row.forEach(cell => {\n            const td = document.createElement(\"td\");\n            td.textContent = cell;\n            tr.appendChild(td);\n        });\n        tbody.appendChild(tr);\n    });\n}\n\n\n\n  wireMemberCamera(); \n\n  } catch (error) {\n    console.error(\"Critical Error: Unable to initialize Zoo Management System.\", error);\n    displayError(\"A serious error occurred. Please reload the page.\");\n    if (statusEl) statusEl.textContent = \"Zoo Status: Error (try refresh)\";\n  }\n});\n\nif (\"Notification\" in window && Notification.permission !== \"granted\") {\n  Notification.requestPermission().then(permission => {\n    if (permission === \"granted\") {\n      console.log(\"ðŸŸ¢ Notification permission granted\");\n    }\n  });\n}\n","// AdminDashboard.js\n// Module for admin dashboard functionalities\nimport { Animal } from './AnimalModule.js';\n/**\n * Simulates an admin login by checking credentials and storing a JWT.\n * @param {string} username \n * @param {string} password \n * @returns {boolean} True if login is successful.\n */\nexport const simulateLogin = (username, password) => {\n    const admin = {\n      username: \"admin\",\n      password: \"zoo123\",\n      role: \"admin\"\n    };\n    if (username === admin.username && password === admin.password) {\n      const token = btoa(JSON.stringify({ username: admin.username, role: admin.role }));\n      sessionStorage.setItem(\"authToken\", token);\n      console.log(\"Admin logged in, token stored:\", token);\n      return true;\n    } else {\n      console.warn(\"Invalid login attempt\");\n      return false;\n    }\n  };\n  \n  /**\n   * Retrieves the current user by decoding the stored JWT.\n   * @returns {Object|null} User object if valid, otherwise null.\n   */\n  export const getCurrentUser = () => {\n    const token = sessionStorage.getItem(\"authToken\");\n    if (!token) return null;\n    try {\n      return JSON.parse(atob(token));\n    } catch (error) {\n        console.error(\"An error occurred:\", error.message);\n    }\n  };\n  \n  /**\n   * Checks if the current user is an admin.\n   * @returns {boolean} True if the user is an admin.\n   */\n  export const checkAdmin = () => {\n    const user = getCurrentUser();\n    return user && user.role === \"admin\";\n  };\n  \n  /**\n   * Executes an action only if the current user is an admin.\n   * @param {Function} action - The admin-only action to execute.\n   */\n  export const requireAdminAction = (action) => {\n    if (checkAdmin()) {\n      action();\n    } else {\n      console.warn(\"Action requires admin access.\");\n    }\n  };\n  \n  /**\n   * Example admin action: Adding a secret animal to the zoo.\n   * This function should be called from the admin dashboard.\n   * @param {Function} addAnimalCallback - Callback that adds an animal.\n   */\n  export const addSecretAnimal = (addAnimalCallback) => {\n    requireAdminAction(() => {\n      // Assuming you have an Animal class (import it if needed)\n      const secretAnimal = new Animal(777, \"Ghost\", \"Panther\");\n      // Use the admin action callback to add the secret animal.\n      addAnimalCallback({\n        id: secretAnimal.id,\n        name: secretAnimal.name,\n        species: secretAnimal.species,\n        health: secretAnimal.status // Using getter for private health status\n      });\n    });\n  };\n  \n  /**\n   * Updates the admin dashboard.\n   * Here you can add real-time updates using AJAX, etc.\n   */\n  export const updateAdminDashboard = async () => {\n    try {\n      // For example, refresh zoo status or visitor information via AJAX.\n      console.log(\"Admin Dashboard: Updating real-time data...\");\n      // Implementation for real-time updates goes here.\n    } catch (error) {\n      console.error(\"Error updating admin dashboard:\", error.message);\n    }\n  };\n  "],"names":["ZooPhotoBooth","HTMLElement","constructor","super","this","attachShadow","mode","_stream","link","document","createElement","rel","href","URL","shadowRoot","append","defaultSrc","_audio","Audio","getAttribute","preload","attributeChangedCallback","name","_old","val","src","connectedCallback","innerHTML","_els","video","getElementById","canvas","preview","start","capture","retake","use","file","err","addEventListener","_startCamera","_capture","_retake","_emitPhoto","e","_fromFile","disconnectedCallback","_stopCamera","_toggleButtons","disabled","_showError","msg","textContent","style","display","_hideError","navigator","mediaDevices","getUserMedia","constraints","facingMode","width","height","audio","v","srcObject","play","catch","videoWidth","videoHeight","Promise","res","once","console","error","getTracks","forEach","t","stop","currentTime","c","ctx","getContext","drawImage","toDataURL","dataUrl","dispatchEvent","CustomEvent","bubbles","composed","detail","target","files","type","startsWith","reader","FileReader","onload","result","readAsDataURL","customElements","define","animals","log","elephants","push","id","species","count","gender","status","health","table","populateAnimalDropdown","animalDropdown","Error","firstChild","removeChild","defaultOption","value","appendChild","length","warn","animal","option","message","notifyAnimalStatusChange","Notification","permission","body","icon","ZHoverHighlight","observedAttributes","_activeEl","hl","querySelector","_onEnter","_setActive","currentTarget","_onFocus","_onLeave","_clearActive","_reposition","_positionTo","selector","_bind","_unbind","links","querySelectorAll","el","window","passive","removeEventListener","opacity","r","getBoundingClientRect","host","left","scrollX","top","scrollY","transform","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","d","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","scripts","getElementsByTagName","i","test","replace","p","b","baseURI","self","displayError","errorContainer","Array","from","children","map","includes","errorElement","displaySuccess","successContainer","successElement","color","normalizePhone","s","isValidUSPhone","raw","core","slice","area","exchange","formatUSPhone","setFieldMsg","input","text","ok","closest","classList","toggle","sanitizeInput","encoded","setNewCSRFToken","token","crypto","randomUUID","sessionStorage","setItem","hiddenTokenInput","getSubmissionTimes","JSON","parse","getItem","secureMembershipForm","form","preventDefault","results","submittedToken","validateCSRFToken","filter","Date","now","Test","Input","Expected","Actual","Status","addSubmissionTime","times","stringify","event","nameEl","emailEl","membershipTypeEl","startDateEl","emergencyContactEl","trim","email","membershipType","startDate","emergencyContact","emergencyContactInput","photoDataUrl","members","localStorage","updateVisitorCount","reset","hidden","handleMembershipSubmission","API_BASE","origin","sleep","ms","setTimeout","safelyUpdateElementText","element","toggleAnimalStatus","find","a","toggleAnimalHealth","exhibits","lat","lng","emergencyStations","ZooAnimalCard","data","setAttribute","render","_getLatestAnimal","isArray","x","String","image","imgSrc","statusBtn","healthBtn","onclick","latest","statusEl","healthEl","onEnter","_active","onLeave","renderAnimalCards","container","async","pill","className","activeEl","positionTo","onReposition","hasAttribute","fetch","json","ensureApiAwake","path","retries","backoff","timeout","init","attempt","controller","AbortController","timer","abort","cache","signal","clearTimeout","Math","pow","fetchWithRetry","fetchAnimals","renderAnimalTable","verifySecureProtocol","hostname","protocol","secureUrl","matrix","tbody","row","tr","cell","td","initializeMembershipForm","onAdded","$","setMsg","small","reName","reSpecies","reStatus","reHealth","reImage","latNum","Number","lngNum","isFinite","abs","newAnimal","feedingSchedule","maintenanceRecords","wireAddAnimalForm","setupBookingForm","bookingForm","visitorName","contact","contactInput","alert","selectedAnimal","dateTime","groupSize","parseInt","isNaN","bookings","updateAdminDashboard","toggleZooStatus","currentlyOpen","next","currentZooStatus","newStatus","statusElement","span","card","lbl","zooStatus","updateHealth","displayZooStatistics","totalAnimals","openAnimals","closedAnimals","visitorCount","change","toggleStatus","updatedAnimal","then","group","groupEnd","serviceWorker","register","booth","wireMemberCamera","requestPermission"],"sourceRoot":""}